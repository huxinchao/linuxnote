git remote set-url origin https://token@github.com/username/repo.git
git clone --depth 1 url
git config --global http.proxy 1.2.3.4:7890
git config credential.helper store

